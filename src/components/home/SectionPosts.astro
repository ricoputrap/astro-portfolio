---
import { getCollection } from "astro:content";
import HomeSection from "../../layouts/HomeSection.astro";
import FeaturedPosts from "../FeaturedPosts.astro";
import type { Post } from "../../types/index.types";
import { getPosts } from "../../utils/data";


const allPosts = await getCollection('posts');
const posts = getPosts(allPosts);

const mainPost: Post = posts[0];
const secondaryPosts: Post[] = posts.slice(1, 3);
---

<HomeSection
  id="posts"
  title="Recent Posts"
  buttonLabel="see all posts"
  buttonLink="/posts"
>
  <FeaturedPosts mainPost={ mainPost } posts={ secondaryPosts } />
</HomeSection>